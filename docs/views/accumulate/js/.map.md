---
title: .map方法
---

> map() 方法创建一个新数组，这个新数组由原数组中的每个元素都调用一次提供的函数后的返回值组成。

> map 不修改调用它的原数组本身（当然可以在 callback 执行时改变原数组）

> 返回值
一个由原数组每个元素执行回调函数的结果组成的新数组。

> 描述

> map 方法会给原数组中的每个元素都按顺序调用一次 callback 函数。callback 每次执行后的返回值（包括 undefined）组合起来形成一个新数组。 callback 函数只会在有值的索引上被调用；那些从来没被赋过值或者使用 delete 删除的索引则不会被调用。

> 因为map生成一个新数组，当你不打算使用返回的新数组却使用map是违背设计初衷的，请用forEach或者for-of替代。你不该使用map: A) 你不打算使用返回的新数组，或/且 B) 你没有从回调函数中返回值。

> callback 函数会被自动传入三个参数：数组元素，元素索引，原数组本身。

``` js
var numbers = [1, 4, 9];
var roots = numbers.map(Math.sqrt);
// roots 的值为 [1, 2, 3], numbers 的值仍为 [1, 4, 9]
```

> 使用 map 重新格式化数组中的对象
> 以下代码使用一个包含对象的数组来重新创建一个格式化后的数组。
``` js
var kvArray = [{key: 1, value: 10},
               {key: 2, value: 20},
               {key: 3, value: 30}];

var reformattedArray = kvArray.map(function(obj) {
   var rObj = {};
   rObj[obj.key] = obj.value;
   return rObj;
});

// reformattedArray 数组为： [{1: 10}, {2: 20}, {3: 30}],

// kvArray 数组未被修改：
// [{key: 1, value: 10},
//  {key: 2, value: 20},
//  {key: 3, value: 30}]

```